import React from 'react';
import { motion } from 'framer-motion';
import gsap from 'gsap';
import { useEffect, useRef } from 'react';

interface TechIcon {
  id: number;
  name: string;
  Icon: React.ElementType;
  color: string;
}

const FloatingIcons: React.FC = () => {
  const iconsContainerRef = useRef<HTMLDivElement>(null);

  const techStack: TechIcon[] = [
    { id: 1, name: 'React', Icon: () => (
      <svg viewBox="0 0 24 24" className="w-12 h-12">
        <path fill="currentColor" d="M12 13.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm7.5-6a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm-15 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm7.5 12a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z"/>
      </svg>
    ), color: '#61DAFB' },
    { id: 2, name: 'TypeScript', Icon: () => (
      <svg viewBox="0 0 24 24" className="w-12 h-12">
        <path fill="currentColor" d="M3 3h18v18H3V3zm10.71 12.07h3.11v1.49H8.13v-1.49h3.11V6.4h-2.79V4.91h5.26v10.16z"/>
      </svg>
    ), color: '#3178C6' },
    { id: 3, name: 'Next.js', Icon: () => (
      <svg viewBox="0 0 24 24" className="w-12 h-12">
        <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
      </svg>
    ), color: '#000000' },
    { id: 4, name: 'JavaScript', Icon: () => (
      <svg viewBox="0 0 24 24" className="w-12 h-12">
        <path fill="currentColor" d="M3 3h18v18H3V3zm16.525 13.707c-.131-.821-.666-1.511-2.252-2.155-.552-.259-1.165-.438-1.349-.854-.068-.248-.078-.382-.034-.529.113-.484.687-.629 1.137-.495.293.09.563.315.732.676.775-.507.775-.507 1.316-.844-.203-.314-.304-.451-.439-.586-.473-.528-1.103-.798-2.126-.775l-.528.067c-.507.124-.991.395-1.283.754-.855.968-.608 2.655.427 3.354 1.023.765 2.521.933 2.712 1.653.18.878-.652 1.159-1.475 1.058-.607-.136-.945-.439-1.316-1.002l-1.372.788c.157.359.337.517.607.832 1.305 1.316 4.568 1.249 5.153-.754.021-.067.18-.528.056-1.237l.034.049zm-6.737-5.434h-1.686c0 1.453-.007 2.898-.007 4.354 0 .924.047 1.772-.104 2.033-.247.517-.886.451-1.175.359-.297-.146-.448-.349-.623-.641-.047-.078-.082-.146-.095-.146l-1.368.844c.229.473.563.879.994 1.137.641.383 1.502.507 2.404.305.588-.17 1.095-.519 1.358-1.059.384-.697.302-1.553.299-2.509.008-1.541 0-3.083 0-4.635l.003-.042z"/>
      </svg>
    ), color: '#F7DF1E' },
    { id: 5, name: 'Node.js', Icon: () => (
      <svg viewBox="0 0 24 24" className="w-12 h-12">
        <path fill="currentColor" d="M12 21.35l-1.45-.61c-3.93-1.64-6.55-5.47-6.55-9.74 0-5.52 4.48-10 10-10s10 4.48 10 10c0 4.27-2.62 8.1-6.55 9.74L12 21.35z"/>
      </svg>
    ), color: '#339933' },
    { id: 6, name: 'Vue.js', Icon: () => (
      <svg viewBox="0 0 24 24" className="w-12 h-12">
        <path fill="currentColor" d="M19.197 1.608l.003-.006h-4.425L12 6.4v.002L9.225 1.608H4.8l7.2 12.442L19.2 1.608h-.003zM12 14.41L.931 2.343H4.8L12 13.9l7.2-11.557h3.869L12 14.41z"/>
      </svg>
    ), color: '#4FC08D' },
    { id: 7, name: 'Tailwind CSS', Icon: () => (
      <svg viewBox="0 0 24 24" className="w-12 h-12">
        <path fill="currentColor" d="M12 6C9.33 6 7.67 7.33 7 10c1-1.33 2.17-1.83 3.5-1.5.76.19 1.31.74 1.91 1.34C13.53 10.96 14.71 12 17 12c2.67 0 4.33-1.33 5-4-1 1.33-2.17 1.83-3.5 1.5-.76-.19-1.31-.74-1.91-1.34C15.47 7.04 14.29 6 12 6zm-5 6c-2.67 0-4.33 1.33-5 4 1-1.33 2.17-1.83 3.5-1.5.76.19 1.31.74 1.91 1.34C8.53 16.96 9.71 18 12 18c2.67 0 4.33-1.33 5-4-1 1.33-2.17 1.83-3.5 1.5-.76-.19-1.31-.74-1.91-1.34C10.47 13.04 9.29 12 7 12z"/>
      </svg>
    ), color: '#06B6D4' },
    { id: 8, name: 'Three.js', Icon: () => (
      <svg viewBox="0 0 24 24" className="w-12 h-12">
        <path fill="currentColor" d="M12 2L2 19h20L12 2zm0 4.6L18.76 17H5.24L12 6.6z"/>
      </svg>
    ), color: '#000000' },
    { id: 9, name: 'GraphQL', Icon: () => (
      <svg viewBox="0 0 24 24" className="w-12 h-12">
        <path fill="currentColor" d="M12 2L2 7v10l10 5 10-5V7L12 2zm0 2.33l6.67 3.34v6.66L12 17.67l-6.67-3.34V7.67L12 4.33z"/>
      </svg>
    ), color: '#E10098' },
    { id: 10, name: 'MongoDB', Icon: () => (
      <svg viewBox="0 0 24 24" className="w-12 h-12">
        <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
      </svg>
    ), color: '#47A248' },
    { id: 11, name: 'SASS', Icon: () => (
      <svg viewBox="0 0 24 24" className="w-12 h-12">
        <path fill="currentColor" d="M12 2L2 7v10l10 5 10-5V7L12 2zm0 2.33l6.67 3.34v6.66L12 17.67l-6.67-3.34V7.67L12 4.33z"/>
      </svg>
    ), color: '#CC6699' },
    { id: 12, name: 'Redux', Icon: () => (
      <svg viewBox="0 0 24 24" className="w-12 h-12">
        <path fill="currentColor" d="M16.63 16.563c.885-.092 1.557-.863 1.527-1.788a1.723 1.723 0 0 0-1.71-1.665h-.062c-.947.03-1.68.833-1.65 1.788.032.463.215.863.49 1.14-1.039 2.067-2.627 3.577-5.01 4.841-.947.463-1.988.648-2.935.555-.77-.093-1.374-.463-1.742-.987-.555-.802-.617-1.665-.153-2.528.37-.71 1.039-1.234 1.434-1.48a8.01 8.01 0 0 1-.246-1.202c-2.873.925-5.1-.185-5.684-1.387-.71-1.419.061-3.577 1.742-4.841 1.434-1.11 3.392-1.604 4.642-1.573.185-1.665 1.02-3.33 2.106-4.379C10.03 2.27 11.86 1.93 13.416 2.3c1.619.401 2.935 1.387 3.361 2.836.277.987.246 2.929-.986 4.44-.986 1.234-2.505 1.696-3.545 1.296-.524-.216-.863-.71-.74-1.172.123-.401.493-.71.863-.71.123 0 .246.03.37.092.184.093.339.124.493.124.74-.062 1.496-.648 1.557-1.296.092-.802-.37-1.727-1.434-1.973-.71-.154-1.496.031-2.136.555-.863.71-1.312 1.973-1.188 3.02.061.277.154.525.246.802-1.312.37-2.318.71-2.935.987-.863.37-1.68.925-2.259 1.665-.71.863-1.02 1.634-.894 2.282.123.617.709 1.48 2.228 1.511.987.03 2.075-.247 2.997-.648.154.555.37 1.11.678 1.604-1.373.987-2.689 2.452-3.021 3.577-.431 1.635.123 2.929.894 3.577.617.524 1.988.802 3.392-.154 1.804-1.234 2.504-3.3 2.35-4.595 1.434-.34 2.566-.31 3.638.092 1.312.494 2.228 1.387 2.258 2.282.03.956-.74 1.665-1.557 1.788z"/>
      </svg>
    ), color: '#764ABC' },
    { id: 13, name: 'Firebase', Icon: () => (
      <svg viewBox="0 0 24 24" className="w-12 h-12">
        <path fill="currentColor" d="M3.89 15.672L6.255.461A.542.542 0 017.27.288l2.543 4.771zm16.794 3.692l-2.25-14a.54.54 0 00-.919-.295L3.316 19.365l7.856 4.427a1.621 1.621 0 001.588 0zM14.3 7.147l-1.82-3.482a.542.542 0 00-.96 0L3.53 17.984z"/>
      </svg>
    ), color: '#FFCA28' },
    { id: 14, name: 'Webpack', Icon: () => (
      <svg viewBox="0 0 24 24" className="w-12 h-12">
        <path fill="currentColor" d="M21.0799 14.4697L12.9999 19.2097V16.5697L17.8699 13.7297L21.0799 14.4697ZM21.4999 14.1297V9.70967L18.4399 10.4297V13.4097L21.4999 14.1297ZM2.91994 14.4697L10.9999 19.2097V16.5697L6.12994 13.7297L2.91994 14.4697ZM2.49994 14.1297V9.70967L5.55994 10.4297V13.4097L2.49994 14.1297ZM2.66994 9.23967L10.9999 4.32967V6.86967L5.86994 9.89967L5.75994 9.95967L2.66994 9.23967ZM21.3299 9.23967L12.9999 4.32967V6.86967L18.1299 9.89967L18.2399 9.95967L21.3299 9.23967Z"/>
      </svg>
    ), color: '#8DD6F9' },

      { id: 15, name: 'CSS3', Icon: () => (
        <svg viewBox="0 0 24 24" className="w-12 h-12">
          <path fill="currentColor" d="M1.5 0h21l-1.91 21.563L11.977 24l-8.565-2.438L1.5 0zm17.09 4.413L5.41 4.41l.213 2.622 10.125.002-.255 2.716h-6.64l.24 2.573h6.182l-.366 3.523-2.91.804-2.956-.81-.188-2.11h-2.61l.29 3.855L12 19.288l5.373-1.53L18.59 4.414z"/>
        </svg>
      ), color: '#1572B6' },
      { id: 16, name: 'HTML5', Icon: () => (
        <svg viewBox="0 0 24 24" className="w-12 h-12">
          <path fill="currentColor" d="M1.5 0h21l-1.91 21.563L11.977 24l-8.564-2.438L1.5 0zm7.031 9.75l-.232-2.718 10.059.003.23-2.622L5.412 4.41l.698 8.01h9.126l-.326 3.426-2.91.804-2.955-.81-.188-2.11H6.248l.33 4.171L12 19.351l5.379-1.443.744-8.157H8.531z"/>
        </svg>
      ), color: '#E34F26' },
      { id: 17, name: 'PostgreSQL', Icon: () => (
        <svg viewBox="0 0 24 24" className="w-12 h-12">
          <path fill="currentColor" d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm-.5 14.5c-2.49 0-4.5-2.01-4.5-4.5s2.01-4.5 4.5-4.5 4.5 2.01 4.5 4.5-2.01 4.5-4.5 4.5z"/>
        </svg>
      ), color: '#336791' },
      { id: 18, name: 'Docker', Icon: () => (
        <svg viewBox="0 0 24 24" className="w-12 h-12">
          <path fill="currentColor" d="M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-5.43h2.118a.186.186 0 00.186-.186V3.574a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m0 2.716h2.118a.187.187 0 00.186-.186V6.29a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.887c0 .102.082.185.185.186m-2.93 0h2.12a.186.186 0 00.184-.186V6.29a.185.185 0 00-.185-.185H8.1a.185.185 0 00-.185.185v1.887c0 .102.083.185.185.186m-2.964 0h2.119a.186.186 0 00.185-.186V6.29a.185.185 0 00-.185-.185H5.136a.186.186 0 00-.186.185v1.887c0 .102.084.185.186.186m5.893 2.715h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.93 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.083.185.185.185m-2.964 0h2.119a.185.185 0 00.185-.185V9.006a.185.185 0 00-.184-.186h-2.12a.186.186 0 00-.186.186v1.887c0 .102.084.185.186.185m-2.92 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.082.185.185.185M23.763 9.89c-.065-.051-.672-.51-1.954-.51-.338.001-.676.03-1.01.087-.248-1.7-1.653-2.53-1.716-2.566l-.344-.199-.226.327c-.284.438-.49.922-.612 1.43-.23.97-.09 1.882.403 2.661-.595.332-1.55.413-1.744.42H.751a.751.751 0 00-.75.748 11.376 11.376 0 00.692 4.062c.545 1.428 1.355 2.48 2.41 3.124 1.18.723 3.1 1.137 5.275 1.137.983.003 1.963-.086 2.93-.266a12.248 12.248 0 003.823-1.389c.98-.567 1.86-1.288 2.61-2.136 1.252-1.418 1.998-2.997 2.553-4.4h.221c1.372 0 2.215-.549 2.68-1.009.309-.293.55-.65.707-1.046l.098-.288z"/>
        </svg>
      ), color: '#2496ED' },
      { id: 19, name: 'Git', Icon: () => (
        <svg viewBox="0 0 24 24" className="w-12 h-12">
          <path fill="currentColor" d="M23.546 10.93L13.067.452c-.604-.603-1.582-.603-2.188 0L8.708 2.627l2.76 2.76c.645-.215 1.379-.07 1.889.441.516.515.658 1.258.438 1.9l2.658 2.66c.645-.223 1.387-.078 1.9.435.721.72.721 1.884 0 2.604-.719.719-1.881.719-2.6 0-.539-.541-.674-1.337-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348.713.721.713 1.883 0 2.6-.719.721-1.889.721-2.609 0-.719-.719-.719-1.879 0-2.598.182-.18.387-.316.605-.406V8.835c-.217-.091-.424-.222-.6-.401-.545-.545-.676-1.342-.396-2.009L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477c.604.604 1.582.604 2.186 0l10.43-10.43c.605-.603.605-1.582 0-2.187"/>
        </svg>
      ), color: '#F05032' },
      { id: 20, name: 'Vite', Icon: () => (
        <svg viewBox="0 0 24 24" className="w-12 h-12">
          <path fill="currentColor" d="M12 2L2 7v10l10 5 10-5V7L12 2zm0 2.33l6.67 3.34v6.66L12 17.67l-6.67-3.34V7.67L12 4.33z"/>
        </svg>
      ), color: '#646CFF' }
    ];
  
    useEffect(() => {
      if (!iconsContainerRef.current) return;
  
      const icons = iconsContainerRef.current.children;
      
      // Create random floating animation for each icon
      Array.from(icons).forEach((icon) => {
        const randomX = Math.random() * 50 - 20;
        const randomY = Math.random() * 50 - 20;
        const randomDuration = 2 + Math.random() * 4;
        const randomDelay = Math.random() * 4;
        
        gsap.to(icon, {
          x: randomX,
          y: randomY,
          duration: randomDuration,
          delay: randomDelay,
          repeat: -1,
          yoyo: true,
          ease: "sine.inOut",
        });
      });
  
      // Clean up animations on component unmount
      return () => {
        gsap.killTweensOf(icons);
      };
    }, []);
  
    return (
      <div className="  ">
        <div ref={iconsContainerRef} className="absolute inset-0 flex items-center opacity-35 justify-center">
          {techStack.map((tech) => (
            <motion.div
              key={tech.id}
              className=""
              initial={{ scale: 0, opacity: 0 }}
              animate={{ scale: 1, opacity: 1 }}
              transition={{ duration: 0.5, delay: tech.id * 0.1 }}
              whileHover={{ scale: 1.2, transition: { duration: 0.2 } }}
            >
              <div
                className="relative p-4 rounded-full transition-transform cursor-pointer"
                style={{ color: tech.color }}
              >
                {/* Glow effect */}
                <div
                  className="absolute inset-0 rounded-full opacity-50 blur-xl"
                  style={{ backgroundColor: tech.color }}
                />
                {/* Icon */}
                <tech.Icon />
                {/* Tooltip */}
                <div className="opacity-0 group-hover:opacity-100 absolute -bottom-8 left-1/2 transform -translate-x-1/2 bg-black/80 text-white px-2 py-1 rounded text-sm whitespace-nowrap">
                  {tech.name}
                </div>
              </div>
            </motion.div>
          ))}
        </div>
      </div>
    );
  };
  
  export default FloatingIcons;